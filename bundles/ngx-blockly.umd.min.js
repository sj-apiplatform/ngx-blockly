!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core")):"function"==typeof define&&define.amd?define("ngx-blockly",["exports","@angular/core"],e):e((t=t||self)["ngx-blockly"]={},t.ng.core)}(this,(function(t,e){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)};function n(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function r(t){var e="function"==typeof Symbol&&t[Symbol.iterator],o=0;return e?e.call(t):{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}}}function i(t,e){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),c=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)c.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return c}var c=function(){};var l=function(){};var s=function(){function t(){this.config={},this.generatorConfig={},this.customBlocks=[],this.workspaceChange=new e.EventEmitter,this.dartCode=new e.EventEmitter,this.javascriptCode=new e.EventEmitter,this.luaCode=new e.EventEmitter,this.phpCode=new e.EventEmitter,this.pythonCode=new e.EventEmitter,this.xmlCode=new e.EventEmitter}return t.prototype.ngOnInit=function(){var t,e;if(this.customBlocks){var o=function(t){if(Blockly.Blocks[t.type]={init:function(){var e,o=new((e=t.class).bind.apply(e,function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t}([void 0,t.type,this,t.blockMutator],t.args)));o.init(this),this.mixin({blockInstance:o})}},void 0!==Blockly.Python&&(Blockly.Python[t.type]=function(t){return t.blockInstance.toPythonCode(t)}),void 0!==Blockly.Dart&&(Blockly.Dart[t.type]=function(t){return t.blockInstance.toDartCode(t)}),void 0!==Blockly.JavaScript&&(Blockly.JavaScript[t.type]=function(t){return t.blockInstance.toJavaScriptCode(t)}),void 0!==Blockly.Lua&&(Blockly.Lua[t.type]=function(t){return t.blockInstance.toLuaCode(t)}),void 0!==Blockly.PHP&&(Blockly.PHP[t.type]=function(t){return t.blockInstance.toPHPCode(t)}),t.blockMutator){var e={mutationToDom:function(){return t.blockMutator.mutationToDom.call(t.blockMutator,this)},domToMutation:function(e){t.blockMutator.domToMutation.call(t.blockMutator,this,e)}};t.blockMutator.blockList&&t.blockMutator.blockList.length>0&&(e.decompose=function(e){return t.blockMutator.decompose.call(t.blockMutator,this,e)},e.compose=function(e){t.blockMutator.compose.call(t.blockMutator,this,e)},e.saveConnections=function(e){t.blockMutator.saveConnections.call(t.blockMutator,this,e)}),Blockly.Extensions.unregister(t.blockMutator.name),Blockly.Extensions.registerMutator(t.blockMutator.name,e,(function(){t.blockMutator.afterBlockInit.call(t.blockMutator,this)}),t.blockMutator.blockList)}};try{for(var n=r(this.customBlocks),c=n.next();!c.done;c=n.next()){o(c.value)}}catch(e){t={error:e}}finally{try{c&&!c.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}}},t.prototype.ngAfterViewInit=function(){this._init()},t.prototype.onResize=function(t){var e=this;setTimeout((function(){return e.resize()}),200)},t.prototype.ngOnChanges=function(t){t.config&&!t.config.firstChange&&this._init()},t.prototype.workspaceToCode=function(t){this.generatorConfig.dart&&this.dartCode.emit(Blockly.Dart.workspaceToCode(Blockly.Workspace.getById(t))),this.generatorConfig.javascript&&this.javascriptCode.emit(Blockly.JavaScript.workspaceToCode(Blockly.Workspace.getById(t))),this.generatorConfig.lua&&this.luaCode.emit(Blockly.Lua.workspaceToCode(Blockly.Workspace.getById(t))),this.generatorConfig.php&&this.phpCode.emit(Blockly.PHP.workspaceToCode(Blockly.Workspace.getById(t))),this.generatorConfig.python&&this.pythonCode.emit(Blockly.Python.workspaceToCode(Blockly.Workspace.getById(t))),this.generatorConfig.xml&&this.xmlCode.emit(Blockly.Xml.domToPrettyText(Blockly.Xml.workspaceToDom(Blockly.Workspace.getById(t))))},t.prototype.toXml=function(){return Blockly.Xml.domToPrettyText(Blockly.Xml.workspaceToDom(this.workspace))},t.prototype.fromXml=function(t){Blockly.Xml.clearWorkspaceAndLoadFromXml(Blockly.Xml.textToDom(t),this.workspace)},t.prototype.appendFromXml=function(t){Blockly.Xml.appendDomToWorkspace(Blockly.Xml.textToDom(t),this.workspace)},t.prototype.resize=function(){Blockly.svgResize(this.workspace)},t.prototype._init=function(){var t,e=this;this.workspace&&(t=this.toXml(),this.workspace.dispose()),this.workspace=Blockly.inject("blockly",this.config),this.workspace.addChangeListener((function(t){e._onWorkspaceChange(t)})),t&&this.fromXml(t),this.resize()},t.prototype._onWorkspaceChange=function(t){this.workspaceChange.emit(t),this.workspaceToCode(t.workspaceId)},t.decorators=[{type:e.Component,args:[{selector:"ngx-blockly",template:'<div id="blockly-wrapper" class="blockly-wrapper">\n    <div id="blockly" class="blockly"></div>\n</div>\n',styles:[".blockly-wrapper{width:100%;height:100%}.blockly,:host ::ng-deep .blocklySvg{position:absolute;width:100%;min-width:100%;height:100%;min-height:100%}"]}]}],t.ctorParameters=function(){return[]},t.propDecorators={config:[{type:e.Input}],generatorConfig:[{type:e.Input}],customBlocks:[{type:e.Input}],workspaceChange:[{type:e.Output}],dartCode:[{type:e.Output}],javascriptCode:[{type:e.Output}],luaCode:[{type:e.Output}],phpCode:[{type:e.Output}],pythonCode:[{type:e.Output}],xmlCode:[{type:e.Output}],onResize:[{type:e.HostListener,args:["window:resize",["$event"]]}]},t}();var a=function(){function t(t){this._type=t}return Object.defineProperty(t.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"class",{get:function(){return this._class},set:function(t){this._class=t},enumerable:!0,configurable:!0}),t}();var u=function(t){function e(e,o,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var c=t.call(this,e)||this;return c._block=o,c._blockMutator=n,c._args=r,c}return n(e,t),e.prototype.init=function(t){this._block=t,this.defineBlock(),this.block.setOnChange((function(t){this.blockInstance.onChange(t)}))},e.prototype.onChange=function(t){},e.prototype.toXML=function(){return'<block type="'+this.type+'"></block>'},e.prototype.toDartCode=function(t){return"Not implemented"},e.prototype.toJavaScriptCode=function(t){return"Not implemented"},e.prototype.toLuaCode=function(t){return"Not implemented"},e.prototype.toPHPCode=function(t){return"Not implemented"},e.prototype.toPythonCode=function(t){return"Not implemented"},Object.defineProperty(e.prototype,"block",{get:function(){return this._block},set:function(t){this._block=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blockMutator",{get:function(){return this._blockMutator},set:function(t){this._blockMutator=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"args",{get:function(){return this._args},set:function(t){this._args=t},enumerable:!0,configurable:!0}),e}(a);var p=function(t){function e(e){var o=t.call(this,e)||this;return o._values=[],o}return n(e,t),Object.defineProperty(e.prototype,"values",{get:function(){return this._values},set:function(t){this._values=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"field",{get:function(){return this._field},set:function(t){this._field=t},enumerable:!0,configurable:!0}),e.prototype.toXML=function(){var t,e,o='<block type="'+this.type+'">';try{for(var n=r(this.values),i=n.next();!i.done;i=n.next()){o+=i.value.toXML()}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return o+=this.field?this.field.toXML():"",o+="</block>"},e}(a);var f=function(){function t(t,e,o){this._name=t,this._shadow=e,this._block=o}return Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadow",{get:function(){return this._shadow},set:function(t){this._shadow=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"block",{get:function(){return this._block},set:function(t){this._block=t},enumerable:!0,configurable:!0}),t.prototype.toXML=function(){return'<value name="'+this.name+'">'+this.block?this.block.toXML():""+this.shadow?this.shadow.toXML():"</value>"},t}();var h=function(){function t(t,e){this._name=t,this._value=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t},enumerable:!0,configurable:!0}),t.prototype.toXML=function(){return'<field name="'+this.name+'">'+this.value+"</field>"},t}();var y=function(){function t(t,e,o,n,r,i){this._name=t,this._colour=e,this._blocks=o||[],this._categories=n||[],this._custom=r,this._style=i}return Object.defineProperty(t.prototype,"blocks",{get:function(){return this._blocks},set:function(t){this._blocks=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"categories",{get:function(){return this._categories},set:function(t){this._categories=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"colour",{get:function(){return this._colour},set:function(t){this._colour=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"custom",{get:function(){return this._custom},set:function(t){this._custom=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this._style},set:function(t){this._style=t},enumerable:!0,configurable:!0}),t.prototype.toXML=function(){var t,e,o,n,i='<category name="'+this._name+'" ';void 0===this.style?i+='colour="'+this._colour+'" ':i+='categorystyle="'+this._style+'" ',i+=this.custom?' custom="'+this._custom+'">':">";try{for(var c=r(this._categories),l=c.next();!l.done;l=c.next()){i+=l.value.toXML()}}catch(e){t={error:e}}finally{try{l&&!l.done&&(e=c.return)&&e.call(c)}finally{if(t)throw t.error}}try{for(var s=r(this._blocks),a=s.next();!a.done;a=s.next()){i+=a.value.toXML()}}catch(t){o={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}return i+="</category>"},t}();var d=function(){function t(){}return t.prototype.toXML=function(){return"<sep></sep>"},t}();var _=function(){function t(t,e){void 0===e&&(e=null),this._name=t,this._blockList=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blockList",{get:function(){return this._blockList},set:function(t){this._blockList=t},enumerable:!0,configurable:!0}),t}();var m=new y("Logic","%{BKY_LOGIC_HUE}",[new p("controls_if"),new p("logic_compare"),new p("logic_operation"),new p("logic_negate"),new p("logic_boolean"),new p("logic_null"),new p("logic_ternary")]),b=new y("Loops","%{BKY_LOOPS_HUE}",[new p("controls_repeat_ext"),new p("controls_whileUntil"),new p("controls_for"),new p("controls_forEach"),new p("controls_flow_statements"),new p("controls_flow_statements")]),k=new y("Math","%{BKY_MATH_HUE}",[new p("math_number"),new p("math_arithmetic"),new p("math_single"),new p("math_trig"),new p("math_constant"),new p("math_number_property"),new p("math_round"),new p("math_on_list"),new p("math_modulo"),new p("math_constrain"),new p("math_random_int"),new p("math_random_float"),new p("math_atan2")]),g=new y("Text","%{BKY_TEXTS_HUE}",[new p("text"),new p("text_join"),new p("text_append"),new p("text_length"),new p("text_isEmpty"),new p("text_indexOf"),new p("text_charAt"),new p("text_getSubstring"),new p("text_changeCase"),new p("text_trim"),new p("text_print"),new p("text_prompt_ext")]),w=new y("Lists","%{BKY_LISTS_HUE}",[new p("lists_create_with"),new p("lists_create_with"),new p("lists_repeat"),new p("lists_length"),new p("lists_isEmpty"),new p("lists_indexOf"),new p("lists_getIndex"),new p("lists_setIndex"),new p("lists_getSublist"),new p("lists_split"),new p("lists_sort")]),v=new y("Colours","%{BKY_COLOUR_HUE}",[new p("colour_picker"),new p("colour_random"),new p("colour_random"),new p("colour_blend")]),C=new y("Variables","%{BKY_VARIABLES_HUE}",[],[],"VARIABLE"),B=new y("Functions","%{BKY_PROCEDURES_HUE}",[],[],"PROCEDURE"),O=function(){function t(){}return t.prototype.build=function(){var t,e,o='<xml id="toolbox" style="display: none">';if(this._nodes)try{for(var n=r(this._nodes),i=n.next();!i.done;i=n.next()){o+=i.value.toXML()}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return o+="</xml>"},Object.defineProperty(t.prototype,"nodes",{get:function(){return this._nodes},set:function(t){this._nodes=t},enumerable:!0,configurable:!0}),t.decorators=[{type:e.Injectable}],t}();var x=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{declarations:[s],imports:[],exports:[s],providers:[O],schemas:[e.NO_ERRORS_SCHEMA]}]}],t}();t.Block=a,t.BlockMutator=_,t.COLOUR_CATEGORY=v,t.Category=y,t.CustomBlock=u,t.FUNCTIONS_CATEGORY=B,t.Field=h,t.LISTS_CATEGORY=w,t.LOGIC_CATEGORY=m,t.LOOP_CATEGORY=b,t.MATH_CATEGORY=k,t.NgxBlocklyComponent=s,t.NgxBlocklyConfig=c,t.NgxBlocklyGeneratorConfig=l,t.NgxBlocklyModule=x,t.NgxToolboxBuilderService=O,t.Separator=d,t.TEXT_CATEGORY=g,t.VARIABLES_CATEGORY=C,t.Value=f,t.XmlBlock=p,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-blockly.umd.min.js.map